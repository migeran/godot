#!/usr/bin/env python
from misc.utility.scons_hints import *

Import("env")

base = "#platform/linuxbsd/x11/"

source_files = [
    base + "display_server_x11.cpp",
    base + "key_mapping_x11.cpp",
    base + "rendering_native_surface_x11.cpp",
]

if env["use_sowrap"]:
    source_files.append(
        [
            base + "dynwrappers/xlib-so_wrap.c",
            base + "dynwrappers/xcursor-so_wrap.c",
            base + "dynwrappers/xinerama-so_wrap.c",
            base + "dynwrappers/xinput2-so_wrap.c",
            base + "dynwrappers/xrandr-so_wrap.c",
            base + "dynwrappers/xrender-so_wrap.c",
            base + "dynwrappers/xext-so_wrap.c",
        ]
    )

if env["vulkan"]:
    source_files.append(base + "rendering_context_driver_vulkan_x11.cpp")

if env["opengl3"]:
    env.Append(CPPDEFINES=["GLAD_GLX_NO_X11"])
    source_files.append(
        [
            base + "gl_manager_x11_egl.cpp",
            base + "gl_manager_x11.cpp",
            base + "detect_prime_x11.cpp",
            "#thirdparty/glad/glx.c",
        ]
    )

Return("source_files")
